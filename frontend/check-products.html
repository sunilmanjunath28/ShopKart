<!DOCTYPE html>
<html>
<head>
    <title>Check Products</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f5f5f5; }
        .box { background: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto; }
        h1 { color: #667eea; }
        .count { font-size: 72px; font-weight: bold; color: #667eea; text-align: center; margin: 30px 0; }
        button { background: #667eea; color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 5px; }
        button:hover { background: #5568d3; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px; }
    </style>
</head>
<body>
    <div class="box">
        <h1>üîç Product Check</h1>
        <div class="count" id="count">0</div>
        <p style="text-align: center; color: #666;">Products in Storage</p>
        
        <div style="text-align: center;">
            <button onclick="checkNow()">üîÑ Check Now</button>
            <button onclick="addTest()">‚ûï Add Test Product</button>
            <button onclick="clearAll()">üóëÔ∏è Clear All</button>
            <button onclick="location.href='seller-dashboard.html'">üìä Dashboard</button>
        </div>
        
        <div id="details"></div>
    </div>

    <script>
        function checkNow() {
            const user = JSON.parse(localStorage.getItem('user') || '{"id":1}');
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            
            const myProducts = products.filter(p => p.sellerId == user.id);
            
            document.getElementById('count').textContent = myProducts.length;
            
            let html = '<h3>Details:</h3>';
            html += `<p>User ID: ${user.id}</p>`;
            html += `<p>Total Products: ${products.length}</p>`;
            html += `<p>My Products: ${myProducts.length}</p>`;
            
            if (myProducts.length > 0) {
                html += '<h4>My Products:</h4><pre>';
                myProducts.forEach((p, i) => {
                    html += `${i+1}. ${p.name} (ID: ${p.id}, Seller: ${p.sellerId})\n`;
                });
                html += '</pre>';
            }
            
            if (products.length > 0 && myProducts.length === 0) {
                html += '<h4 style="color: red;">‚ö†Ô∏è Products exist but none match your user ID!</h4>';
                html += '<pre>';
                products.forEach((p, i) => {
                    html += `${i+1}. ${p.name} - Seller ID: ${p.sellerId} (Your ID: ${user.id})\n`;
                });
                html += '</pre>';
            }
            
            document.getElementById('details').innerHTML = html;
        }
        
        function addTest() {
            const user = JSON.parse(localStorage.getItem('user') || '{"id":1,"name":"Test User"}');
            if (!localStorage.getItem('user')) {
                localStorage.setItem('user', JSON.stringify(user));
            }
            
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            
            const newProduct = {
                id: Date.now(),
                name: 'Test Product ' + (products.length + 1),
                price: 999,
                description: 'Test product',
                category: 'Electronics',
                stock: 10,
                sellerPhone: '+91 9876543210',
                imageUrl: 'https://via.placeholder.com/300',
                sellerId: user.id,
                status: 'ACTIVE',
                rating: 0,
                reviews: 0,
                createdAt: new Date().toISOString()
            };
            
            products.push(newProduct);
            localStorage.setItem('products', JSON.stringify(products));
            
            alert('‚úÖ Test product added!');
            checkNow();
        }
        
        function clearAll() {
            if (confirm('Clear all products?')) {
                localStorage.removeItem('products');
                alert('‚úÖ Cleared!');
                checkNow();
            }
        }
        
        // Auto-check on load
        window.onload = checkNow;
    </script>
</body>
</html>
